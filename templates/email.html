<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PhishGuard — Email Analyzer</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Jura:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
  <style>
    :root {
      --bg:       #05080c;
      --bg2:      #0a0f15;
      --surface:  #0e1620;
      --border:   #1a2740;
      --accent:   #00d4ff;
      --accent2:  #ff3c5a;
      --accent3:  #39ff14;
      --warn:     #ffa620;
      --text:     #c8d8e8;
      --dim:      #4a6070;
    }
    *, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: 'Jura', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    body::before {
      content: '';
      position: fixed; inset: 0; z-index: 0;
      background-image:
        linear-gradient(rgba(255,166,32,.022) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,166,32,.022) 1px, transparent 1px);
      background-size: 44px 44px;
      pointer-events: none;
    }
    .top-glow {
      position: fixed; top: -180px; left: 50%;
      transform: translateX(-50%);
      width: 900px; height: 500px; z-index: 0;
      background: radial-gradient(ellipse, rgba(255,166,32,.055) 0%, transparent 70%);
      pointer-events: none;
    }

    /* Navbar */
    .navbar {
      position: fixed; top:0; left:0; right:0; z-index:100;
      height: 58px;
      background: rgba(5,8,12,.88);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center;
      padding: 0 2rem; gap: 0;
    }
    .nav-brand {
      font-family: 'Share Tech Mono', monospace;
      font-size: 1.05rem;
      letter-spacing: 2px;
      color: var(--accent);
      text-decoration: none;
      margin-right: auto;
    }
    .nav-brand span { color: var(--accent2); }
    .nav-links { display:flex; gap:0; list-style:none; }
    .nav-links li a {
      display: block;
      font-size: .78rem;
      font-weight: 600;
      letter-spacing: 1.8px;
      text-transform: uppercase;
      color: var(--dim);
      text-decoration: none;
      padding: 0 1.1rem;
      height: 58px;
      line-height: 58px;
      transition: color .2s, background .2s;
      border-bottom: 2px solid transparent;
    }
    .nav-links li a:hover,
    .nav-links li a.active {
      color: var(--warn);
      border-bottom-color: var(--warn);
      background: rgba(255,166,32,.05);
    }

    /* Page */
    .page-wrap {
      position: relative; z-index: 1;
      min-height: 100vh;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      padding: 90px 1.5rem 4rem;
    }

    .page-badge {
      font-family: 'Share Tech Mono', monospace;
      font-size: .72rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--warn);
      border: 1px solid rgba(255,166,32,.35);
      background: rgba(255,166,32,.06);
      padding: 5px 16px;
      border-radius: 2px;
      margin-bottom: 1.8rem;
    }
    .page-title {
      font-size: clamp(2rem, 5vw, 3.2rem);
      font-weight: 700;
      color: #e8f4ff;
      text-align: center;
      margin-bottom: .7rem;
      line-height: 1.1;
    }
    .page-title em {
      font-style: normal;
      color: var(--warn);
    }
    .page-sub {
      font-size: .95rem;
      color: var(--dim);
      text-align: center;
      margin-bottom: 2.8rem;
      max-width: 480px;
    }

    /* Card */
    .detect-card {
      width: 100%; max-width: 700px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 2.2rem 2.4rem 2rem;
      position: relative;
    }
    .detect-card::before {
      content: '';
      position: absolute; top:0; left:0; right:0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--warn), transparent);
    }

    .card-label {
      font-family: 'Share Tech Mono', monospace;
      font-size: .7rem;
      letter-spacing: 2.5px;
      text-transform: uppercase;
      color: var(--warn);
      margin-bottom: 1.2rem;
    }
    .card-label::before { content: '// '; color: var(--dim); }

    /* Subject field */
    .field-group { margin-bottom: 1rem; }
    .field-label {
      font-family: 'Share Tech Mono', monospace;
      font-size: .68rem;
      letter-spacing: 1.8px;
      text-transform: uppercase;
      color: var(--dim);
      margin-bottom: .4rem;
    }

    .text-input {
      width: 100%;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 3px;
      color: var(--text);
      font-family: 'Share Tech Mono', monospace;
      font-size: .88rem;
      padding: .8rem 1rem;
      outline: none;
      transition: border-color .2s, box-shadow .2s;
    }
    .text-input:focus {
      border-color: var(--warn);
      box-shadow: 0 0 0 3px rgba(255,166,32,.1);
    }
    .text-input::placeholder { color: var(--dim); }

    .email-textarea {
      width: 100%;
      min-height: 160px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 3px;
      color: var(--text);
      font-family: 'Share Tech Mono', monospace;
      font-size: .85rem;
      padding: .9rem 1rem;
      resize: vertical;
      outline: none;
      transition: border-color .2s, box-shadow .2s;
      line-height: 1.65;
    }
    .email-textarea:focus {
      border-color: var(--warn);
      box-shadow: 0 0 0 3px rgba(255,166,32,.1);
    }
    .email-textarea::placeholder { color: var(--dim); }

    .btn-scan {
      width: 100%;
      background: var(--warn);
      color: var(--bg);
      font-family: 'Jura', sans-serif;
      font-weight: 700;
      font-size: .88rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      border: none;
      border-radius: 3px;
      padding: .9rem;
      cursor: pointer;
      margin-top: 1.2rem;
      transition: box-shadow .2s, transform .1s;
    }
    .btn-scan:hover {
      box-shadow: 0 0 24px rgba(255,166,32,.4);
    }
    .btn-scan:active { transform: scale(.98); }

    /* Result */
    .result-box {
      margin-top: 1.4rem;
      border-radius: 3px;
      padding: 1.1rem 1.3rem;
      font-family: 'Share Tech Mono', monospace;
      font-size: .88rem;
      border: 1px solid;
    }
    .result-box.safe {
      background: rgba(57,255,20,.11);
      border-color: rgba(57,255,20,.60);
      color: #39ff14;
    }
    .result-box.phish {
      background: rgba(255,30,50,.15);
      border-color: rgba(255,30,50,.70);
      color: #ff4060;
    }
    .res-label {
      font-size: .65rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      opacity: .6;
      margin-bottom: .3rem;
    }
    .res-verdict { font-size: 1.1rem; font-weight: 700; }

    /* Warning checklist */
    .warning-box {
      margin-top: 2.4rem;
      width: 100%;
      max-width: 700px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 1.6rem 2rem;
      position: relative;
    }
    .warning-box::before {
      content: '';
      position: absolute; top:0; left:0; right:0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--accent2), transparent);
    }
    .wb-title {
      font-family: 'Share Tech Mono', monospace;
      font-size: .7rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--accent2);
      margin-bottom: 1rem;
    }
    .wb-title::before { content: '⚠ '; }
    .checks {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: .5rem .8rem;
    }
    .check-item {
      font-size: .82rem;
      color: var(--dim);
    }
    .check-item::before {
      content: '□ ';
      color: var(--accent2);
      font-family: 'Share Tech Mono', monospace;
    }

    /* Flash */
    .flash-danger {
      background: rgba(255,60,90,.08);
      border: 1px solid rgba(255,60,90,.3);
      color: var(--accent2);
      border-radius: 3px;
      padding: .7rem 1rem;
      font-size: .85rem;
      font-family: 'Share Tech Mono', monospace;
      margin-bottom: 1rem;
    }

    footer {
      position: relative; z-index: 1;
      border-top: 1px solid var(--border);
      padding: 1.4rem 2rem;
      display: flex; align-items: center;
      justify-content: space-between;
      flex-wrap: wrap; gap: .8rem;
    }
    .footer-brand {
      font-family: 'Share Tech Mono', monospace;
      font-size: .82rem; color: var(--dim);
    }
    .footer-brand strong { color: var(--accent); }
    .footer-note {
      font-size: .75rem; color: var(--dim);
      font-family: 'Share Tech Mono', monospace;
    }

    @media (max-width:600px) {
      .detect-card { padding: 1.5rem 1.2rem; }
      .checks { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<div class="top-glow"></div>

<!-- NAVBAR -->
<nav class="navbar">
  <a href="/" class="nav-brand">PHISH<span>GUARD</span></a>
  <ul class="nav-links">
    <li><a href="/">URL</a></li>
    <li><a href="/sms">SMS</a></li>
    <li><a href="/email" class="active">Email</a></li>
  </ul>
</nav>

<!-- PAGE CONTENT -->
<div class="page-wrap">
  <div class="page-badge">✉️ Email Analysis Module</div>
  <h1 class="page-title">Email <em>Phishing</em><br>Analyzer</h1>
  <p class="page-sub">
    Paste the email subject and body to check if it's a phishing
    attempt. Our classifier detects credential harvesting &amp; spoofing.
  </p>

  <!-- CARD -->
  <div class="detect-card">
    <div class="card-label">Paste Email Body</div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% for category, message in messages %}
        <div class="flash-danger">⚠ {{ message }}</div>
      {% endfor %}
    {% endwith %}

    <form method="POST" action="/email">
      <div class="field-group">
        <div class="field-label">Email Message</div>
        <textarea class="email-textarea" name="email_text"
          placeholder="Paste the full email body here...

e.g. Dear Customer, We have detected suspicious activity on your PayPal account. 
Click the link below to verify your identity immediately or your account will be permanently closed.
http://paypal-verify.tk/login"
        >{{ message if message else '' }}</textarea>
      </div>

      <button type="submit" class="btn-scan">Analyze Email</button>
    </form>

    {% if result %}
    <div class="result-box {{ 'safe' if result == 'safe' else 'phish' }}">
      <div class="res-label">Classification Result</div>
      <div class="res-verdict">
        {% if result == 'safe' %}
          SAFE &nbsp;—&nbsp; {{ confidence }}% confidence
        {% else %}
          UNSAFE &nbsp;—&nbsp; {{ confidence }}% phishing probability
        {% endif %}
      </div>
    </div>
    {% endif %}
  </div>

  <!-- WARNING CHECKLIST -->
  <div class="warning-box">
    <div class="wb-title">Phishing Email Red Flags</div>
    <div class="checks">
      <div class="check-item">Mismatched sender domain</div>
      <div class="check-item">Urgent action required</div>
      <div class="check-item">Generic greeting ("Dear Customer")</div>
      <div class="check-item">Suspicious links / redirects</div>
      <div class="check-item">Grammar / spelling errors</div>
      <div class="check-item">Requests for credentials</div>
      <div class="check-item">Unexpected attachments</div>
      <div class="check-item">Threats of account closure</div>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-brand"><strong>PHISHGUARD</strong> — Email Detection Module</div>
  <div class="footer-note">// NLP + ML Classifier · Email Threat Intelligence</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
